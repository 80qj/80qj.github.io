<html> <head> <title>6米下料精准器</title> <style> #numbersInput { width: 80%; height: 300px; box-sizing: border-box; } </style> </head> <body> <textarea id="numbersInput"></textarea>
<button onClick="sortNumbers()">材料排序</button>

<button id="combineButton" onClick="combineNumbers()">下料方案</button>

<p>6米材料:需<span id="count"></span> 根</p> <p>总:<span id="sum"></span> mm</p> <p id="output"></p> <script> var count = 0; var sum = 0; var combined = false; function sortNumbers() { var numbers = getNumbers(); numbers.sort(function(a, b) { return b - a; }); updateInput(numbers); } function combineNumbers() { if (combined) { return; } combined = true; document.getElementById("combineButton").disabled = true; var numbers = getNumbers(); count = 0; sum = 0; var result = []; var usedIndexes = []; while (usedIndexes.length < numbers.length) { count++; var tempSum = 0; result = []; for (var i = 0; i < numbers.length; i++) { if (tempSum + numbers[i] <= 6000 && !usedIndexes.includes(i)) { result.push(numbers[i]); tempSum += numbers[i]; usedIndexes.push(i); } } sum += tempSum; var color = result.length % 2 == 0 ? "blue" : "red"; if (tempSum > 6000) { color = "red"; } document.getElementById("output").innerHTML += "<span style='color:" + color + "; font-weight: bold;'>" + result.join(", ") + "</span><br>"; } document.getElementById("count").innerHTML = count; document.getElementById("sum").innerHTML = sum; } function getNumbers() { var numbersString = document.getElementById("numbersInput").value.trim().replace(/ +/g, ','); return numbersString.split(/,\s*/).map(Number); } function updateInput(numbers) { document.getElementById("numbersInput").value = numbers.join(","); } </script> </body> </html>